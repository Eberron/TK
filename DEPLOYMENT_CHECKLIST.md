# TK插件部署检查清单

## 🔧 部署前准备

### 1. 环境配置
- [ ] 确认Node.js版本 (建议v16+)
- [ ] 安装项目依赖 `npm install`
- [ ] 配置DeepSeek API密钥
- [ ] 更新 `config.js` 中的生产环境API地址

### 2. 安全配置
- [ ] 修改管理员默认密码 (admin/admin123)
- [ ] 配置HTTPS证书
- [ ] 设置CORS白名单
- [ ] 启用API访问频率限制

### 3. 数据库配置
- [ ] 配置生产数据库连接
- [ ] 运行数据库迁移脚本
- [ ] 设置数据备份策略
- [ ] 配置数据库访问权限

## 🚀 部署步骤

### 1. 后端服务部署
```bash
# 进入服务器目录
cd server

# 安装依赖
npm install

# 启动服务 (生产环境)
npm run start

# 或使用PM2管理进程
pm2 start subscription-api.js --name "tk-api"
```

### 2. Chrome插件打包
- [ ] 更新 `manifest.json` 中的版本号
- [ ] 检查所有文件路径正确
- [ ] 压缩插件文件夹为.zip格式
- [ ] 上传到Chrome Web Store

### 3. 管理后台部署
- [ ] 配置Web服务器 (Nginx/Apache)
- [ ] 设置SSL证书
- [ ] 配置域名解析
- [ ] 测试管理后台访问

## ✅ 功能测试

### 1. 插件功能测试
- [ ] 游客模式总结功能 (3次限制)
- [ ] 用户注册和登录
- [ ] 邮箱验证码发送
- [ ] 许可证激活功能
- [ ] 专业版功能解锁

### 2. 管理后台测试
- [ ] 管理员登录
- [ ] 用户管理功能
- [ ] 订单管理功能
- [ ] 许可证管理功能
- [ ] 数据统计图表

### 3. API接口测试
- [ ] 用户认证接口
- [ ] 订阅管理接口
- [ ] 许可证验证接口
- [ ] 管理员接口权限

## 🔍 性能优化

### 1. 前端优化
- [ ] 压缩CSS和JavaScript文件
- [ ] 优化图片资源
- [ ] 启用浏览器缓存
- [ ] 使用CDN加速

### 2. 后端优化
- [ ] 配置数据库连接池
- [ ] 启用API响应缓存
- [ ] 设置请求超时时间
- [ ] 监控服务器性能

## 📊 监控和日志

### 1. 日志配置
- [ ] 配置应用日志级别
- [ ] 设置日志轮转策略
- [ ] 配置错误日志告警
- [ ] 监控API调用频率

### 2. 性能监控
- [ ] 设置服务器监控
- [ ] 配置数据库性能监控
- [ ] 监控API响应时间
- [ ] 设置异常告警

## 🛡️ 安全检查

### 1. 数据安全
- [ ] 用户密码加密存储
- [ ] API接口权限验证
- [ ] 敏感数据传输加密
- [ ] 定期安全漏洞扫描

### 2. 访问控制
- [ ] 管理后台访问IP限制
- [ ] API访问频率限制
- [ ] 用户会话超时设置
- [ ] 防止SQL注入攻击

## 📋 上线后检查

### 1. 功能验证
- [ ] 所有核心功能正常
- [ ] 支付流程完整
- [ ] 邮件发送正常
- [ ] 数据统计准确

### 2. 用户体验
- [ ] 页面加载速度
- [ ] 移动端适配
- [ ] 错误提示友好
- [ ] 操作流程顺畅

## 🆘 故障处理

### 常见问题解决
1. **服务器无法启动**
   - 检查端口占用
   - 验证依赖安装
   - 查看错误日志

2. **数据库连接失败**
   - 检查连接配置
   - 验证数据库服务状态
   - 确认网络连通性

3. **API接口报错**
   - 检查请求参数
   - 验证权限配置
   - 查看服务器日志

### 紧急联系方式
- 技术支持: support@example.com
- 紧急热线: 400-xxx-xxxx
- 开发团队: dev@example.com

---

**注意**: 请在生产环境部署前完成所有检查项目，确保系统稳定可靠。