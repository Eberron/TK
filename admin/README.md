# TK插件管理后台

## 功能概述

管理后台提供了完整的用户和订阅管理功能，包括：

- **用户管理**：查看、搜索和管理所有注册用户
- **订单管理**：监控和处理订阅订单
- **许可证管理**：管理和监控许可证状态
- **数据统计**：查看系统使用统计和分析

## 文件结构

```
admin/
├── index.html      # 管理后台主页面
├── login.html      # 管理员登录页面
├── admin.js        # 管理后台JavaScript逻辑
├── admin.css       # 管理后台样式文件
└── README.md       # 说明文档
```

## 使用方法

### 1. 启动后端服务

首先确保后端API服务正在运行：

```bash
cd server
npm install
node subscription-api.js
```

服务将在 `http://localhost:3000` 启动。

### 2. 访问管理后台

1. 打开浏览器，访问 `admin/login.html`
2. 使用管理员账户登录：
   - 用户名：`admin`
   - 密码：`admin123`
3. 登录成功后将跳转到管理后台主页面

### 3. 功能说明

#### 数据统计
- 显示用户总数、活跃用户、专业版用户和订单总数
- 实时更新的统计数据

#### 用户管理
- 查看所有注册用户列表
- 按邮箱搜索用户
- 按用户类型筛选（免费版、专业版、游客）
- 查看用户详细信息
- 启用/禁用用户账户

#### 订单管理
- 查看所有订单记录
- 按订单ID搜索
- 按订单状态筛选（待支付、已支付、已取消）
- 查看订单详情
- 取消待支付订单

#### 许可证管理
- 查看所有许可证
- 按许可证密钥搜索
- 按状态筛选（已激活、未激活、已过期）
- 查看许可证详情
- 撤销已激活的许可证

## 安全说明

### 默认管理员账户

- **用户名**：`admin`
- **密码**：`admin123`

⚠️ **重要提醒**：在生产环境中，请务必：
1. 修改默认管理员密码
2. 使用强密码策略
3. 启用HTTPS访问
4. 限制管理后台访问IP

### 权限控制

- 所有管理接口都需要有效的管理员Token
- Token在登录时生成，存储在localStorage中
- 页面刷新时会自动验证Token有效性

## 开发说明

### API接口

管理后台使用以下API接口：

- `POST /api/admin/login` - 管理员登录
- `POST /api/admin/verify` - 验证管理员Token
- `GET /api/admin/stats` - 获取系统统计数据
- `GET /api/admin/users` - 获取用户列表
- `GET /api/admin/orders` - 获取订单列表
- `GET /api/admin/licenses` - 获取许可证列表

### 数据模拟

在开发阶段，如果后端API不可用，管理后台会自动使用模拟数据：

- 模拟用户数据
- 模拟订单数据
- 模拟许可证数据
- 模拟统计数据

### 响应式设计

管理后台采用响应式设计，支持：
- 桌面端（1200px+）
- 平板端（768px-1199px）
- 移动端（<768px）

## 部署建议

### 生产环境部署

1. **服务器配置**
   - 使用HTTPS协议
   - 配置防火墙规则
   - 设置访问日志

2. **数据库配置**
   - 使用真实数据库替代内存存储
   - 配置数据备份策略
   - 设置数据库连接池

3. **安全配置**
   - 修改默认管理员密码
   - 启用JWT Token过期机制
   - 配置CORS策略
   - 添加请求频率限制

4. **监控配置**
   - 配置服务器监控
   - 设置错误日志收集
   - 配置性能监控

## 故障排除

### 常见问题

1. **无法登录管理后台**
   - 检查后端服务是否正常运行
   - 确认用户名密码是否正确
   - 检查浏览器控制台错误信息

2. **数据无法加载**
   - 检查API服务连接状态
   - 确认管理员Token是否有效
   - 检查网络连接

3. **页面显示异常**
   - 清除浏览器缓存
   - 检查CSS文件是否正确加载
   - 确认JavaScript文件无错误

### 日志查看

- 后端日志：查看服务器控制台输出
- 前端日志：打开浏览器开发者工具查看Console

## 更新日志

### v1.0.0 (2024-01-XX)
- 初始版本发布
- 基础用户管理功能
- 订单和许可证管理
- 数据统计面板
- 响应式设计支持

## 技术支持

如有问题或建议，请联系开发团队。